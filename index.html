<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const statusEl = document.getElementById('status');
const setStatus = (t)=>{ statusEl.textContent = t; console.log(t); };
const showErr  = (e)=>{ const msg = (e && e.message) ? e.message : String(e); alert("Erreur: "+msg); console.error(e); };

try {
  // ⬇️ RENSEIGNE TES VALEURS ICI
  const SUPABASE_URL = "https://aoidadxujanxpxctbyvb.supabase.co";
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvaWRhZHh1amFueHB4Y3RieXZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzMDYyNzYsImV4cCI6MjA3NDg4MjI3Nn0.Iaf6J_KzUzRNddUE6Mq6xTJW0xKc7eR6FU3OtW2CwHw";

  if (!SUPABASE_URL.startsWith("https://") || !SUPABASE_URL.includes(".supabase.co")) {
    throw new Error("SUPABASE_URL invalide: " + SUPABASE_URL);
  }

  const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  setStatus("🔎 Test connexion…");

  // Petit ping pour vérifier la table
  (async () => {
    const { data, error } = await sb.from('decedents').select('id').limit(1);
    if (error) {
      setStatus("❌ " + error.message);
      return;
    }
    setStatus("✅ Prêt (clé anonyme)");

    // === Fonctions de l'ap
